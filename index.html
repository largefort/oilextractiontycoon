<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>GeoTycoon Mobile</title>

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<!-- Bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<!-- Game Styles -->
<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="stats.css">

<style>
html, body {
    margin: 0;
    height: 100%;
    background: #1a1a1a;
    font-family: Roboto, sans-serif;
    overflow: hidden;
    color: #fff;
}

#map {
    position: absolute;
    inset: 0;
    z-index: 1;
}

.resource-container {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 95%;
    max-width: 600px;
    display: flex;
    justify-content: space-between;
    background: rgba(40,40,40,0.95);
    padding: 6px;
    border-radius: 8px;
    z-index: 5;
    font-size: 12px;
}

.resource { text-align: center; flex: 1; }

.news-ticker-container {
    position: fixed;
    top: 42px;
    width: 95%;
    max-width: 600px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(20,20,20,0.9);
    padding: 5px;
    border-radius: 8px;
    z-index: 4;
}

.news-ticker {
    white-space: nowrap;
    animation: scroll 15s linear infinite;
}

@keyframes scroll {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
}

.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 55px;
    background: rgba(45,45,45,0.95);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 6;
}

.bottom-nav button {
    background: none;
    border: none;
    color: #fff;
    font-size: 12px;
}

.tab-content {
    display: none;
    position: absolute;
    top: 0;
    bottom: 55px;
    width: 100%;
    padding: 10px;
    background: rgba(30,30,30,0.95);
    z-index: 3;
    overflow-y: auto;
}

.tab-content.active { display: block; }

.dollar-pop-up { color: #00ff00; }
.energy-pop-up { color: #ffd000; }
</style>
</head>

<body>

<div id="map"></div>

<!-- RESOURCES -->
<div class="resource-container">
    <div class="resource">$<span id="money">1000</span></div>
    <div class="resource">Oil: <span id="oil">0</span></div>
    <div class="resource">Energy: <span id="energy">0</span></div>
    <div class="resource">Eff: <span id="efficiency">100%</span></div>
</div>

<!-- NEWS -->
<div class="news-ticker-container">
    <div class="news-ticker" id="newsTicker">Welcome to GeoTycoon</div>
</div>

<!-- TABS -->
<div id="controls-tab" class="tab-content active">
    <h4>Controls</h4>
    <button class="btn btn-primary btn-block" onclick="buyLand()">Buy Land ($100)</button>
    <button class="btn btn-primary btn-block" onclick="buyOilRig()">Buy Oil Rig ($500)</button>
    <button class="btn btn-primary btn-block" onclick="buyPowerPlant()">Buy Power Plant ($1000)</button>
    <p class="text-center mt-3">Weather: <span id="weather">Fetchingâ€¦</span></p>
</div>

<div id="settings-tab" class="tab-content">
    <h4>Settings</h4>
    <select class="form-control" onchange="updateMapTheme(this.value)">
        <option value="EsriWorldImagery">World Imagery</option>
        <option value="Street Map">Street</option>
        <option value="Satellite">Topo</option>
    </select>

    <label class="mt-3">
        <input type="checkbox" onchange="toggleHighFidelity(this.checked)">
        HD Visual Effects
    </label>
</div>

<div id="stats-tab" class="tab-content">
    <h4>Stats</h4>
    <p>Oil Extracted: <span id="total-oil">0</span></p>
    <p>Energy Generated: <span id="total-energy">0</span></p>
    <p>Buildings: <span id="total-buildings">0</span></p>
    <p>Lands: <span id="total-lands">0</span></p>
    <p>Total Money: $<span id="total-money-produced">0</span></p>
    <p>Version: <span id="version">1.0.0</span></p>
</div>

<!-- NAV -->
<div class="bottom-nav">
    <button onclick="showTab('controls-tab')"><i class="fas fa-cogs"></i></button>
    <button onclick="showTab('settings-tab')"><i class="fas fa-sliders-h"></i></button>
    <button onclick="showTab('stats-tab')"><i class="fas fa-chart-bar"></i></button>
</div>

<!-- JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/gh/maneoverland/leaflet.WorldMiniMap/dist/Control.WorldMiniMap.js"></script>
<script src="game.js"></script>

<script>
function showTab(id) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    setTimeout(() => map.invalidateSize(), 150);
}
</script>

</body>
</html>
